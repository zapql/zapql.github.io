(this.webpackJsonpzapql=this.webpackJsonpzapql||[]).push([[0],{113:function(t,n,e){},114:function(t,n,e){},139:function(t,n,e){"use strict";e.r(n);var a,i,c,o,r,s,d,b,l,p,h,j,g,x,u,m,O,f,v,w,y,k,C,I,D,B,z,M,q,S,A=e(0),E=e.n(A),F=e(39),N=e.n(F),L=(e(113),e(42)),R=(e(114),e(16)),T=e(44),U=e(15),H=e(38),J=e(92),P=e(2),W=e(96),G="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzaGFyZCI6IjU1NjU5NjkxMDI5NSIsImlhdCI6MTYxNDA5NjI3Nn0.fNgOsRfM0y0-lQOZmhqn3NA7h3lR9EcOWyIiSqdTxBI",$=Object(W.a)((function(t,n){var e=n.headers;return{headers:Object(H.a)(Object(H.a)({},e),{},{authorization:"Bearer ".concat(G)})}})),K=new U.HttpLink({uri:"http://zapql.com:4000"}),Q=new J.a({uri:"ws://zapql.com:4000/graphql",options:{reconnect:!0}}),V=Object(U.split)((function(t){var n=t.query,e=Object(P.q)(n);return"OperationDefinition"===e.kind&&"subscription"===e.operation}),Q,$.concat(K)),Z=new U.ApolloClient({link:V,cache:new U.InMemoryCache}),X=e(65),Y=e.n(X),_=e(158),tt=e(162),nt=e(157),et=e(7),at=e(9),it=at.b.div(a||(a=Object(et.a)(["\n  @media (max-width: 30em) {\n    #Side {\n      visibility: collapse;\n    }\n  }\n"]))),ct=at.b.div(i||(i=Object(et.a)(["\n    min-height: 10vh;\n"]))),ot=at.b.img(c||(c=Object(et.a)(["\n  height: 50px;\n  width: 50px;\n  object-fit: cover;\n  border-radius: 50%;\n"]))),rt=at.b.div(o||(o=Object(et.a)(["\n  width: calc(100% - 60px);\n  height: 46px;\n  padding: 15px 0;\n  margin-left: 10px;\n  border-bottom: 0.5px solid silver;\n  position: relative;\n"]))),st=at.b.div(r||(r=Object(et.a)(["\n  margin-top: 5px;\n"]))),dt=at.b.div(s||(s=Object(et.a)(["\n  color: gray;\n  font-size: 15px;\n  margin-top: 5px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"]))),bt=at.b.div(d||(d=Object(et.a)(["\n  position: absolute;\n  color: gray;\n  top: 20px;\n  right: 0;\n  font-size: 13px;\n"]))),lt=e(4),pt=function(t){var n=t.chatListData,e=void 0===n?{contacts:{},chats:{}}:n;return Object(lt.jsxs)(it,{"data-testid":"ChatDiv",children:[Object(lt.jsx)(ct,{}),Object(lt.jsx)(nt.a,{}),Object(lt.jsx)(_.a,{children:e.map((function(t){return Object(lt.jsxs)(tt.a,{"data-testid":"chat",button:!0,component:T.b,to:"/chats/".concat(t.id),children:[Object(lt.jsx)(ot,{"data-testid":"picture",src:t.info.avatar,alt:"Profile"}),Object(lt.jsxs)(rt,{children:[Object(lt.jsx)(st,{"data-testid":"name",children:t.info.name}),t.messages&&Object(lt.jsxs)(E.a.Fragment,{children:[Object(lt.jsx)(dt,{"data-testid":"content",children:t.messages[0].msg}),Object(lt.jsx)(bt,{"data-testid":"date",children:Y.a.unix(t.messages[0].timestamp).format("HH:mm")})]})]})]},t.id)}))})]})},ht=e(61),jt=e(105),gt=e(163),xt=e(159),ut=Object(at.b)(gt.a)(b||(b=Object(et.a)(["\n    background-color: var(--primary-bg);\n    color: var(--primary-text);\n    font-size: 20px;\n    line-height: 40px;\n    position: relative;\n"]))),mt=Object(at.b)(xt.a)(l||(l=Object(et.a)(["\n  padding: 0;\n  display: flex;\n  flex-direction: row;\n  background-color: var(--primary-bg);\n  color: var(--primary-text);\n"]))),Ot=at.b.img(p||(p=Object(et.a)(["\n  height: 40px;\n  width: 40px;\n  margin-top: 3px;\n  margin-left: -1vh;\n  object-fit: cover;\n  padding: 5px;\n  border-radius: 50%;\n"]))),ft=at.b.div(h||(h=Object(et.a)(["\n  line-height: 56px;\n  margin-left: 1vh;\n"]))),vt=function(t){var n=t.chatHeaderData;return Object(lt.jsx)("div",{"data-testid":"chat-header-outer-div",children:Object(lt.jsx)(ut,{"data-testid":"chat-header-navbar",position:"relative",children:Object(lt.jsxs)(mt,{"data-testid":"chat-header-container",children:[Object(lt.jsx)(Ot,{"data-testid":"chat-picture",src:n.avatar}),Object(lt.jsx)(ft,{"data-testid":"chat-name",children:n.name})]})})})},wt=at.b.div(j||(j=Object(et.a)(["\n  display: block;\n  flex: 2;\n  overflow-y: overlay;\n  padding: 0 14vh;\n"]))),yt=at.b.div(g||(g=Object(et.a)(["\ndisplay: inline-block;\nposition: relative;\nmax-width: 100%;\nborder-radius: 7px;\nbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);\nmargin-top: 10px;\nmargin-bottom: 10px;\nclear: both;\n\n&::after {\n  content: '';\n  display: table;\n  clear: both;\n}\n\n&::before {\n  content: '';\n  position: absolute;\n  bottom: 3px;\n  width: 12px;\n  height: 19px;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n\n","\n"])),(function(t){return t.isMine?Object(at.a)(x||(x=Object(et.a)(["\n        float: right;\n        background-color: #dcf8c6;\n\n        &::before {\n          right: -11px;\n          background-image: url(/assets/message-mine.png);\n        }\n      "]))):Object(at.a)(u||(u=Object(et.a)(["\n        float: left;\n        background-color: #fff;\n\n        &::before {\n          left: -11px;\n          background-image: url(/assets/message-other.png);\n        }\n      "])))})),kt=at.b.div(m||(m=Object(et.a)(["\n  padding: 5px 7px;\n  word-wrap: break-word;\n  max-width: 80vh;\n\n  &::after {\n    content: ' \\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0\\00a0';\n    display: inline;\n  }\n"],["\n  padding: 5px 7px;\n  word-wrap: break-word;\n  max-width: 80vh;\n\n  &::after {\n    content: ' \\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0\\\\00a0';\n    display: inline;\n  }\n"]))),Ct=at.b.div(O||(O=Object(et.a)(["\n  position: absolute;\n  bottom: 2px;\n  right: 7px;\n  color: gray;\n  font-size: 12px;\n"]))),It=function(t){var n=t.messageListData,e=void 0===n?[]:n,a=t.chatId;return Object(lt.jsx)(wt,{children:e.map((function(t){return Object(lt.jsxs)(yt,{isMine:t.from!=a,"data-testid":"message-item",children:[Object(lt.jsx)(kt,{"data-testid":"message-content",children:t.msg}),Object(lt.jsx)(Ct,{"data-testid":"message-date",children:Y.a.unix(t.timestamp).format("HH:mm")})]},t.wid)}))})},Dt=e(160),Bt=at.b.span(f||(f=Object(et.a)(['\n    background: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"></path></svg>\');\n    width: 24px;\n    height: 24px;\n']))),zt=function(){return Object(lt.jsx)(Dt.a,{children:Object(lt.jsx)(Bt,{"data-testid":"send","data-icon":"send"})})},Mt=e(161),qt=at.b.div(v||(v=Object(et.a)(["\n  background-color: var(--rich-text-panel-background);\n  display: flex;\n  height: 50px;\n  border-left: 30px;\n  padding-top: 1.5vh;\n  padding-bottom: 1.5vh;\n  padding-left: 1.5vh;\n  padding-right: 1.5vh;\n  width: calc(100% - 3vh);\n"]))),St=at.b.input(w||(w=Object(et.a)(["\n  width: calc(100% - 50px);\n  border: none;\n  border-radius: 999px;\n  padding: 10px;\n  padding-left: 20px;\n  padding-right: 20px;\n  font-size: 15px;\n  outline: none;\n  box-shadow: 0 1px silver;\n  font-size: 18px;\n  line-height: 45px;\n"]))),At=Object(at.b)(Mt.a)(y||(y=Object(et.a)(["\n  min-width: 50px !important;\n  width: 50px !important;\n  border-radius: 999px !important;\n  background-color: var(--rich-text-panel-background) !important;\n  margin: 0 5px !important;\n  margin-right: 0 !important;\n  color: var(--icon) !important;\n  padding-left: 20px !important;\n  \n  svg {\n    margin-left: -3px;\n  }\n"]))),Et=function(t){var n=t.onMessage,e=t.chatId,a=t.inputState,i=t.setInputState,c=function(){return!!a&&n({variables:{to:e,msg:a}})};return Object(lt.jsxs)(qt,{children:[Object(lt.jsx)(St,{"data-testid":"message-input",id:"message-input",type:"text",placeholder:"Type a message",value:a,onKeyPress:function(t){if(13===t.charCode)return c()},onChange:function(t){var n=t.target;i(n.value)}}),Object(lt.jsx)(At,{"data-testid":"send-button",id:"send-button",onClick:function(){return c()},children:Object(lt.jsx)(zt,{})})]})},Ft=at.b.div(k||(k=Object(et.a)(["\n  background: url(/assets/chat-background.jpg);\n  display: flex;\n  flex-flow: column;\n  height: 100vh;\n"]))),Nt=Object(U.gql)(C||(C=Object(et.a)(["\n    mutation SendMessage($to: String!, $msg: String!) {\n        sendtextmessage(input: {\n            to: $to, \n            msg: $msg\n    }) {\n        wid\n        timestamp\n        to\n        from\n        msg\n        quote\n        forwarded\n    }\n}"]))),Lt=function(t){document.getElementById("message-input").disabled=t,document.getElementById("send-button").disabled=t},Rt=function(t){var n=t.chatRoomData,e=void 0===n?{id:"",info:{},messages:[]}:n,a=t.dispatch,i=Object(A.useState)(""),c=Object(L.a)(i,2),o=c[0],r=c[1],s=Object(U.useMutation)(Nt),d=Object(L.a)(s,2),b=d[0],l=d[1],p=l.loading,h=l.error,j=l.data;return Object(A.useEffect)((function(){var t=e.id;if(p&&Lt(!0),h&&(Lt(!1),console.log("error")),j){Lt(!1),console.log("RETURN DATA: ",j);var n=Object.keys(j)[0];if(null===j[n])return console.log("VOLTOU NULO, ERRO!"),!1;r((function(){return""})),a((function(e){return Object(H.a)(Object(H.a)({},e),{},{chats:Object(H.a)(Object(H.a)({},e.chats),{},Object(ht.a)({},t,[].concat(Object(jt.a)(e.chats[t]),[Object(H.a)({},j[n])])))})}))}}),[p,h,j]),Object(lt.jsx)(E.a.Fragment,{children:e.id?Object(lt.jsxs)(Ft,{"data-testid":"CallServiceContainer",children:[Object(lt.jsx)(vt,{chatHeaderData:e.info}),Object(lt.jsx)(It,{messageListData:e.messages,chatId:e.id}),Object(lt.jsx)(Et,{onMessage:b,chatId:e.id,inputState:o,setInputState:r})]}):Object(lt.jsx)(R.a,{to:"/chats"})})},Tt=e(104),Ut=at.b.div(I||(I=Object(et.a)(["\n  background-color: var(--intro-background);\n  display: flex;\n  flex-flow: column;\n  height: 100vh;\n"]))),Ht=at.b.div(D||(D=Object(et.a)(["\n  z-index:1;\n  box-sizing:border-box;\n  display:flex;\n  flex-direction: column;\n  flex-grow:1;\n  align-items:center;\n  justify-content:center;\n"]))),Jt=at.b.div(B||(B=Object(et.a)(['\n  background-image: url("/assets/intro-connection-light.jpg");\n  background-repeat: no-repeat;\n  order: 1;\n  min-width:60vh;\n  height: 60vh;\n  margin: 0 auto;\n']))),Pt=at.b.h1(z||(z=Object(et.a)(["\n  display:flex;\n  order: 2;\n  font-size: 32px;\n  font-weight: 300;\n  color: var(--primary-title);\n  text-align:center;\n"]))),Wt=at.b.div(M||(M=Object(et.a)(["\n  display:flex;\n  order: 3;\n  font-size: 14px;\n  line-height: 20px;\n  color: var(--intro-secondary);\n"])));Object(U.gql)(q||(q=Object(et.a)(["\n    query HelloWorld {\n        hello\n    }\n"])));var Gt;Object(U.gql)(S||(S=Object(et.a)(["\n    subscription DateNow {\n        datenow\n    }\n"])));var $t,Kt,Qt,Vt=Object(U.gql)(Gt||(Gt=Object(et.a)(['\n    mutation SendMessage {\n        sendtextmessage(input: {\n            to: "556596910295-1605021081"\n            msg: "Sending from exported store"\n    }) {\n        wid\n        timestamp\n        to\n        from\n        msg\n        quote\n        forwarded\n    }\n}\n']))),Zt=function(t){Object(Tt.a)(t);var n=Object(U.useMutation)(Vt),e=Object(L.a)(n,2);e[0],e[1].data;return Object(lt.jsx)(Ut,{"data-testid":"DashboardContainer",children:Object(lt.jsxs)(Ht,{children:[Object(lt.jsx)(Jt,{}),Object(lt.jsx)(Pt,{children:"Keep your phone connected"}),Object(lt.jsx)(Wt,{children:"WhatsApp connects to your phone to sync messages. To reduce data usage, connect your phone to Wi-Fi."})]})})},Xt=at.b.div($t||($t=Object(et.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  width: 100%;\n"]))),Yt=at.b.div(Kt||(Kt=Object(et.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n  flex: 0.85\n"]))),_t=at.b.div(Qt||(Qt=Object(et.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-basis: 100%;\n  flex: 2\n"]))),tn=function(t){var n=t.state,e=t.dispatch,a=Object(R.g)().chatId,i=Object.entries(n.contacts),c=Object.entries(n.chats),o=i.map((function(t,n){return Object.assign({},{id:t[0]},{info:t[1]},{messages:c[n][1]})})),r=o.find((function(t){return t.id===a}));return Object(lt.jsxs)(Xt,{children:[Object(lt.jsx)(Yt,{id:"Side","data-testid":"Side",children:Object(lt.jsx)(pt,{chatListData:o})}),Object(lt.jsx)(_t,{"data-testid":"Main",children:a?Object(lt.jsx)(Rt,{chatRoomData:r,dispatch:e}):Object(lt.jsx)(Zt,{})})]})},nn={prop1:"Propriedade Um",contacts:{554498455712:{name:"Jackson",status:"Understand however that every man is worth just so much as the things are worth about which he busies himself.",avatar:"https://373819-1169963-raikfcquaxqncofqfm.stackpathdns.com/wp-content/uploads/2016/07/epictetus.jpg"},556599375661:{name:"Itacir Gabral",status:"\ud83e\udd14",avatar:"https://images-na.ssl-images-amazon.com/images/I/81eUW9G6mML.jpg"}},chats:{554498455712:[{type:"textMessage",timestamp:"1613415699",to:"554498455712",from:"556596910295",msg:"Qual a boa?",wid:"EAF75BB00E5CB33C405B80DAC79D015D"},{type:"textMessage",timestamp:"1613415699",to:"556596910295",from:"554498455712",msg:"Pa\xe7oca",wid:"EAF75BB00E5CB33C405B80DAC79D015E"}],556599375661:[{type:"textMessage",timestamp:"1613415688",to:"556596910295",from:"556599375661",msg:"opa e ai ze",wid:"EAF75BB00E5CB33C405B80DAC79D015B"},{type:"textMessage",timestamp:"1613415699",to:"556599375661",from:"556596910295",msg:"tudo",wid:"EAF75BB00E5CB33C405B80DAC79D015C"}]}},en=function(){var t=Object(A.useState)(nn),n=Object(L.a)(t,2),e=n[0],a=n[1];return console.table("App.js: state",e),Object(lt.jsx)(U.ApolloProvider,{client:Z,children:Object(lt.jsx)(T.a,{children:Object(lt.jsxs)(R.d,{children:[Object(lt.jsx)(R.b,{path:"/chats/:chatId?",children:Object(lt.jsx)(tn,{state:e,dispatch:a})}),Object(lt.jsx)(R.b,{exact:!0,path:"/",render:function(){return Object(lt.jsx)(R.a,{to:"/chats"})}})]})})})},an=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,164)).then((function(n){var e=n.getCLS,a=n.getFID,i=n.getFCP,c=n.getLCP,o=n.getTTFB;e(t),a(t),i(t),c(t),o(t)}))};N.a.render(Object(lt.jsx)(E.a.StrictMode,{children:Object(lt.jsx)(en,{})}),document.getElementById("root")),an()}},[[139,1,2]]]);
//# sourceMappingURL=main.a2afd168.chunk.js.map